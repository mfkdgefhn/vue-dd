(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fd3c7e64"],{"0b6f":function(e,t,a){},"102d":function(e,t,a){},1725:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"seach-length"},[a("el-row",{attrs:{gutter:10}},[a("el-col",[a("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.load}},[e._v(e._s("true"===e.loading?"加载中":e.title))]),e._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{loading:e.loading,type:"primary",icon:"el-icon-download"},on:{click:function(t){return e.handleDownload("this")}}},[e._v("导出")]),e._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{loading:e.loading,type:"primary",icon:"el-icon-download"},on:{click:e.exportPdf}},[e._v("PDF")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-message",circle:""},on:{click:e.tipsInfo}})],1)],1),e._v(" "),a("prompt-box",{attrs:{"dialog-visible":e.dialogVisible,title:e.title,"tips-data":e.tipsData},on:{handleClose:e.handleClose}})],1)},i=[],l=a("6724"),o=a("e251"),s={name:"SearchSaleNew",directives:{waves:l["a"]},components:{promptBox:o["a"]},props:{loading:{type:Boolean,default:!1},title:{type:String,default:""}},data:function(){return{dialogVisible:!1,tips:{inSaleStorage:[{name:"区域",description:"根据地域不同分为南区、北区"},{name:"经销商",description:"以客户区分"},{name:"发货量",description:"出库数量"},{name:"余货量",description:"订单数量-发货数量"},{name:"批发数量",description:"销售给二级经销商的数量"},{name:"零售数量",description:"季度总零售数量"},{name:"整体单价",description:"季度款 总零售数量/零售数量"},{name:"整体售罄率",description:"(批发数量+零售数量)/(批发数量+零售数量+总库存)"},{name:"毛利率",description:"(累计销售金额-累计成本)/累计销售金额"},{name:"仓存",description:"季度款 仓库库存"},{name:"总库存",description:"季度款总库存(包括仓库+所有门店)"},{name:"铺店数",description:"门店数量(排除店仓：加盟、特卖、店名带仓、福利店)"},{name:"单店存",description:"所有门店季度款  总库存/门店数量"}],layoutStructure:[{name:"经销商",description:"以客户区分"},{name:"品名",description:"款号字段MID6，版面结构来区分"},{name:"款数",description:"款号N总数量"},{name:"SKU",description:"款号总数量"},{name:"客户批发",description:"1级销售给2级经销商的数量"},{name:"累销",description:"所有门店的零售数量"},{name:"上周",description:"昨日往前14天的零售数量"},{name:"本周",description:"昨日往前7天的零售数量"},{name:"量环比",description:"(本周-上周)/上周"},{name:"累计毛利率",description:"(累计零售金额-累计成本)/累计零售金额"},{name:"均成本",description:"出厂价平均值"},{name:"总单价",description:"所有门店零售总金额/总数量"},{name:"上周",description:"昨日往前14天零售总单价"},{name:"本周",description:"昨日往前7天零售总单价"},{name:"单价变化",description:"本周-上周"},{name:"仓库数量",description:"对应仓库库存数量"},{name:"店铺数量",description:"对应门店库存数量"},{name:"售罄率",description:"(批发+累销)/(批发+累销+仓库+店铺)"},{name:"周存销",description:"店铺数量/((直营销售上周+直营销售本周)/2)"}]}}},computed:{tipsData:function(){return this.title.indexOf("进销存")>=0?this.tips.inSaleStorage:this.title.indexOf("版面结构")>=0?this.tips.layoutStructure:["字段提示，提示板块开发中....."]}},methods:{load:function(){this.$emit("editTitle")},tipsInfo:function(e){this.dialogVisible=!this.dialogVisible},handleDownload:function(e){this.$emit("handleDownload",e)},exportPdf:function(){this.$emit("exportPdf")},handleClose:function(e){this.dialogVisible=!this.dialogVisible}}},r=s,c=(a("8edb"),a("2877")),d=Object(c["a"])(r,n,i,!1,null,"b2e0e714",null);t["a"]=d.exports},"1ccd":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"InSaleStorage"},[a("el-card",{attrs:{"body-style":{padding:"0px 0px 50px 0px"}}},[a("el-row",{staticClass:"menu-class"},[a("el-col",[a("search-sale-new",{attrs:{loading:e.loading,title:e.title},on:{editTitle:e.editTitle,handleDownload:e.handleDownload,exportPdf:e.exportPdf}})],1)],1),e._v(" "),a("el-row",[a("el-col",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{id:"pdfDom","element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)",data:e.table.tableData,"row-style":e.rowStyle}},[a("el-table-column",{attrs:{prop:"customer",label:"经销商",width:"100px",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mid6",label:"品名",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"product",label:"款",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sku",label:"SKU",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"客户",align:"center"}},[a("el-table-column",{attrs:{prop:"wholeSaleCustomer",label:"批发",align:"center"}})],1),e._v(" "),a("el-table-column",{attrs:{label:"直营销售",align:"center"}},[a("el-table-column",{attrs:{prop:"cumulativeSales",label:"累销",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"lastWeek",label:"上周",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"thisWeek",label:"本周",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"quantityLoopRatio",label:"量环比",align:"center"}})],1),e._v(" "),a("el-table-column",{attrs:{prop:"cumulativeGrossMargin",label:"累计毛利率",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"avgCost",label:"均成本",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"均单价",align:"center"}},[a("el-table-column",{attrs:{prop:"allUnitPrice",label:"总单价",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"lastWeekUnitPrice",label:"上周",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"thisWeekUnitPrice",label:"本周",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"unitPriceChange",label:"单价变化",align:"center"}})],1),e._v(" "),a("el-table-column",{attrs:{label:"仓库",align:"center"}},[a("el-table-column",{attrs:{prop:"storageNum",label:"数量",align:"center"}})],1),e._v(" "),a("el-table-column",{attrs:{label:"店铺",align:"center"}},[a("el-table-column",{attrs:{prop:"storeNum",label:"数量",align:"center"}})],1),e._v(" "),a("el-table-column",{attrs:{prop:"soldOutRate",label:"售罄率",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"weekStorageSale",label:"周存销",align:"center"}})],1)],1)],1)],1)],1)},i=[],l=a("1725"),o=a("ad8f"),s=a("ed08"),r=a("6f9c"),c={name:"InSaleStorage",components:{searchSaleNew:l["a"]},data:function(){return{loading:!1,lastDate:this.$moment().add(-1,"D").add(-3,"M").format("YYYYMMDD"),today:this.$moment().add(-1,"D").format("YYYYMMDD"),isThisYear:!0,table:{tableData:[],htmlTitle:this.$moment(this.today).year()+"年"+Object(r["b"])(this.today).ch+"版面结构",title:this.$moment(this.today).year()+"年"+Object(r["b"])(this.today).ch+"版面结构",year:this.$moment(this.today).year(),season:Object(r["b"])(this.today).zh}}},computed:{title:function(){return this.isThisYear?this.$moment(this.today).year()+"年"+Object(r["b"])(this.today).ch+"版面结构":this.$moment(this.lastDate).year()+"年"+Object(r["b"])(this.lastDate).ch+"版面结构"}},watch:{isThisYear:function(e,t){e?(this.table.htmlTitle=this.$moment(this.today).year()+"年"+Object(r["b"])(this.today).ch+"进销存",this.table.title=this.$moment(this.today).year()+"年"+Object(r["b"])(this.today).ch+"版面结构",this.table.year=this.$moment(this.today).year(),this.table.season=Object(r["b"])(this.today).zh):(this.table.htmlTitle=this.$moment(this.lastDate).year()+"年"+Object(r["b"])(this.lastDate).ch+"进销存",this.table.title=this.$moment(this.lastDate).year()+"年"+Object(r["b"])(this.lastDate).ch+"版面结构",this.table.year=this.$moment(this.lastDate).year(),this.table.season=Object(r["b"])(this.lastDate).zh),this.getAnalysis()}},created:function(){this.isThisYear=!0,this.getAnalysis()},methods:{exportPdf:function(){this.getPdf(this.htmlTitle)},editTitle:function(){this.isThisYear=!this.isThisYear,this.getAnalysis()},getAnalysis:function(){var e=this;this.loading=!0,this.table.tableData=[],Object(o["b"])({year:this.table.year,season:this.table.season}).then((function(t){e.$store.dispatch("table/setLayoutStructure",t),e.table.tableData=t,e.loading=!1,e.$message({message:"查询完成!!!",type:"success"})}))},handleDownload:function(e){var t=this;this.loading=!0,0!==this.table.tableData.length?(e=void 0===e?"":e,Promise.all([a.e("chunk-014a57fc"),a.e("chunk-581b2547")]).then(a.bind(null,"4bf8d")).then((function(a){var n=["经销商","品名","款","SKU","客户批发","累销","上周","本周","量环比","累计毛利率","均成本","总单价","上周","本周","单价变化","仓库数量","店铺数量","售罄率","周存销"],i=["customer","mid6","product","sku","wholesaleCustomer","cumulativeSales","lastWeek","thisWeek","quantityLoopRatio","cumulativeGrossMargin","avgCost","allUnitPrice","lastWeekUnitPrice","thisWeekUnitPrice","UnitPriceChange","storageNum","storeNum","soldOutRate","weekStorageSale"],l=t.formatJson(i,e);a.export_json_to_excel({header:n,data:l,filename:t.title}),t.loading=!1}))):this.loading=!1},formatJson:function(e,t){var a=this.$store.getters.layoutStructure;return a.map((function(t){return e.map((function(e){return"timestamp"===e?Object(s["b"])(t[e]):t[e]}))}))},rowStyle:function(e){var t=e.row;e.rowIndex;return t.mid6.indexOf("汇总")>0?"background: #DFE6ED":0===t.mid6.indexOf("汇总")?"background: #EFE6ED":""}}},d=c,u=(a("ba79"),a("2877")),m=Object(u["a"])(d,n,i,!1,null,"161d411f",null);t["default"]=m.exports},5336:function(e,t,a){"use strict";var n=a("93dd"),i=a.n(n);i.a},6724:function(e,t,a){"use strict";a("8d41");var n="@@wavesContext";function i(e,t){function a(a){var n=Object.assign({},t.value),i=Object.assign({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},n),l=i.ele;if(l){l.style.position="relative",l.style.overflow="hidden";var o=l.getBoundingClientRect(),s=l.querySelector(".waves-ripple");switch(s?s.className="waves-ripple":(s=document.createElement("span"),s.className="waves-ripple",s.style.height=s.style.width=Math.max(o.width,o.height)+"px",l.appendChild(s)),i.type){case"center":s.style.top=o.height/2-s.offsetHeight/2+"px",s.style.left=o.width/2-s.offsetWidth/2+"px";break;default:s.style.top=(a.pageY-o.top-s.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",s.style.left=(a.pageX-o.left-s.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return s.style.backgroundColor=i.color,s.className="waves-ripple z-active",!1}}return e[n]?e[n].removeHandle=a:e[n]={removeHandle:a},a}var l={bind:function(e,t){e.addEventListener("click",i(e,t),!1)},update:function(e,t){e.removeEventListener("click",e[n].removeHandle,!1),e.addEventListener("click",i(e,t),!1)},unbind:function(e){e.removeEventListener("click",e[n].removeHandle,!1),e[n]=null,delete e[n]}},o=function(e){e.directive("waves",l)};window.Vue&&(window.waves=l,Vue.use(o)),l.install=o;t["a"]=l},"6f9c":function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return l}));var n=a("c1df");function i(e,t){e=void 0===e?0:e,t=void 0===t?"":t;var a=new Date;a.setDate(a.getDate()+e);var n=a.getFullYear(),i=a.getMonth()+1,l=a.getDate();return i=i>9?i:"0"+i,l=l>9?l:"0"+l,""===t?""+n+i+l:"Y"===t?""+n:"M"===t?""+i:"D"===t?""+l:"YM"===t?""+n+i:"MD"===t?""+i+l:"YMD"===t?""+n+i+l:""}function l(e){var t=void 0===e?n().month()+1:n(e).month()+1,a={};switch(t){case 1:case 2:case 3:a={ch:"春季",zh:"37"};break;case 4:case 5:case 6:a={ch:"夏季",zh:"38"};break;case 7:case 8:case 9:a={ch:"秋季",zh:"39"};break;case 10:case 11:case 12:a={ch:"冬季",zh:"40"};break;default:a="";break}return a}},"7a69":function(e,t,a){},"8d41":function(e,t,a){},"8edb":function(e,t,a){"use strict";var n=a("102d"),i=a.n(n);i.a},"93dd":function(e,t,a){},ad8f:function(e,t,a){"use strict";a.d(t,"e",(function(){return l})),a.d(t,"d",(function(){return o})),a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return c}));var n=a("b775"),i="";function l(e){return Object(n["a"])({url:i+"/Q/r.do?o=qgrxTOP30",method:"get",params:e})}function o(e){return Object(n["a"])({url:i+"/Q/r.do?o=xtkhrjdd",method:"get",params:e})}function s(e){return Object(n["a"])({url:i+"/Q/r.do?o=djlszb",method:"get",params:e})}function r(e){return Object(n["a"])({url:i+"/Q/r.do?o=xsfxJxc",method:"get",params:e})}function c(e){return Object(n["a"])({url:i+"/Q/r.do?o=bmjg",method:"get",params:e})}},ba79:function(e,t,a){"use strict";var n=a("7a69"),i=a.n(n);i.a},e251:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{visible:e.dialogVisible,title:e.title,width:"50%","before-close":e.handleClose,"custom-class":"dialog-class"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-table",{attrs:{data:e.tipsData}},[a("el-table-column",{attrs:{property:"name",label:"字段名",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{property:"description",label:"字段说明"}})],1)],1)},i=[],l={props:{dialogVisible:{type:Boolean,default:!1},tipsData:{type:Array,default:function(){return[]}},title:{type:String,default:""}},data:function(){return{}},watch:{},methods:{handleClose:function(e){this.$emit("handleClose",!1)}}},o=l,s=(a("f39b"),a("5336"),a("2877")),r=Object(s["a"])(o,n,i,!1,null,"51e89278",null);t["a"]=r.exports},f39b:function(e,t,a){"use strict";var n=a("0b6f"),i=a.n(n);i.a}}]);